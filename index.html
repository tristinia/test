<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decode Test</title>
</head>
<body>
    <h1>Decode In Sequence Test</h1>
    <input type="text" id="encodedInput" placeholder="인코딩된 값 입력 (예: 1, 2, 3)">
    <button id="decodeButton">디코드하기</button>
    <h2>결과:</h2>
    <pre id="result"></pre>

    <script>
        const pattern_to_xorbit = {
            "0": 0b1010,
            "1": 0b0101,
            "2": 0b1111,
            "3": 0b0010,
            "4": 0b1011,
            "5": 0b0111,
            "6": 0b1110,
            "7": 0b0001,
        };

        function bit_xor(a, b) {
            return a ^ b;
        }

        function handle_only_0to9_xor(value, xor_bit) {
            let result = value - 65;
            let counter = 0;
            while (bit_xor(result, xor_bit) > 9) {
                result -= 16;
                counter++;
                if (result < 0) {
                    return null;
                }
            }
            return bit_xor(result, xor_bit) + counter * 9;
        }

        function decode_in_sequence(encoded_lst) {
            return encoded_lst.map((color, idx) => {
                return handle_only_0to9_xor(Number(color), pattern_to_xorbit[(idx % 8).toString()]);
            });
        }

        document.getElementById('decodeButton').addEventListener('click', () => {
            const input = document.getElementById('encodedInput').value.split(',').map(s => s.trim());
            const result = decode_in_sequence(input);
            document.getElementById('result').textContent = JSON.stringify(result);
        });
    </script>
</body>
</html>
